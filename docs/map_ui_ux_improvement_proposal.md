# マップ画面 UI/UX 改善提案書

## 1. 現状分析

現在のマップ画面の実装状況を分析しました。

*   **地図スタイル**: `geolonia/basic` を使用し、CSS `filter` (`saturate(0.1)` 等) で彩度を大きく下げています。これにより地図が背景化されていますが、少し無機質な印象を与える可能性があります。
*   **マーカー**: CSS/Canvas で描画された単純な円形（Outer/Inner Circle）です。カテゴリ間の区別は色のみで、視認性は良いですが、「スタイリッシュさ」や「何の店か」の直感的な分かりやすさは改善の余地があります。
*   **詳細表示**: マーカーをタップすると `Shop` コンポーネントがモーダル的に表示されます。
*   **UI コントロール**: ズームボタン等はデフォルトのもので、配置調整がされています。

## 2. 改善コンセプト

**"Immersive & Modern Explore"**
地図そのものを「探検したくなる」没入感のあるキャンバスとし、情報は洗練されたモダンなレイヤーとして提示します。

## 3. 具体的な改善案

### 3.1. 地図スタイルの刷新 (Map Style)

CSS `filter` による脱色ではなく、カスタムマップスタイルを採用し、深みのある世界観を作ります。

*   **提案**: **ダークモード風** または **ミッドナイトブルー** 基調のスタイル。
    *   飲食店マップは夜間の利用も多いため、ダークテーマは非常に映えます。
    *   建物や道路のコントラストを調整し、地図としての視認性を保ちつつ、アートワークのような美しさを目指します。
    *   *Geolonia/Mapboxのカスタムスタイル機能を活用します。*

### 3.2. アイコン・マーカーの最適化 (Markers)

単純な円形から、カテゴリを象徴する**カスタムアイコン**へ進化させます。

*   **デザイン**:
    *   **ピン形状**: 涙滴型（Pin）の中にアイコン（ビール、フォーク、ボトルなど）を配置。
    *   **SVGアイコン**: 解像度に依存せず鮮明。
    *   **アニメーション**: 選択されたピンが少し跳ねる、または波紋（Pulse）のようなエフェクトを周囲に出すことで、ユーザーの操作に対するフィードバックを強化します。
*   **クラスタリング**:
    *   クラスター（集合）マーカーも、単なる数字の円ではなく、半透明のグラデーションを用いた美しいバブルデザインにします。

### 3.3. 詳細情報表示のモダン化 (Detail View)

現在のモーダル表示から、**ボトムシート（カード）型** UIへの移行を提案します。

*   **変更点**:
    *   マーカータップ時、画面全体を覆うのではなく、画面下部からカードがスライドアップします。
    *   **メリット**: 地図とのコンテキストが途切れず、「地図を見ながら店を確認する」体験がスムーズになります。
    *   カードをさらに上にスワイプすると全画面（または大きな詳細ビュー）になる「ハーフモーダル」インタラクションを採用します。

### 3.4. トランジションとマイクロインタラクション

*   **Fly-to**: 店舗選択時、カメラがスムーズに該当店舗へ移動し、適度なズームレベルへ遷移します（現状も実装されていますが、イージングを調整しより滑らかにします）。
*   **ホバーエフェクト**: PC/タブレット向けに、マーカーホバー時に店舗名がツールチップとしてふわっと浮かび上がる演出を追加します。

## 4. UI改善プラン (v2.0) との整合性

既存の `/docs/ui-improvement-plan.md` にある「全体的なデザインシステム（グラスモーフィズム、角丸、タイポグラフィ）」をマップ上のパーツ（検索バー、チップ、カード）にも適用します。

*   **検索バー**: 地図の上に浮いているようなフロートデザイン（グラスモーフィズム適用）。
*   **カテゴリフィルタ**: 横スクロール可能なチップ形式で、アクティブなカテゴリを直感的に切り替え。

## 5. 実装へのロードマップ

1.  **Phase 1: マップスタイルの調整**
    *   Geolonia カスタムスタイルの適用、または CSS Filter の見直し（彩度を少し戻し、コントラストを調整）。
2.  **Phase 2: マーカーデザインの変更**
    *   SVGアイコンの導入。
3.  **Phase 3: 詳細ビューのカード化**
    *   `Shop` コンポーネントの表示モード変更。

この提案により、機能性はそのままに、ユーザーが「触っていて心地よい」と感じるアプリケーションへ進化します。
